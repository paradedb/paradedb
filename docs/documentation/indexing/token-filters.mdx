---
title: Token Filters
noindex: true
---

Token filters apply additional processing to tokens after they have been created.

## Stemmer

Stemming is the process of reducing words to their root form. In English, for example, the root form of `running` and `runs` is `run`. The `stemmer` filter can
be applied to any tokenizer.

```sql
CREATE INDEX search_idx ON mock_items
USING bm25 (id, description)
WITH (
    key_field='id',
    text_fields='{
        "description": {"tokenizer": {"type": "default", "stemmer": "English"}}
    }'
);
```

<ParamField body="stemmer">
  Available stemmers are `Arabic`, `Danish`, `Dutch`, `English`, `Finnish`,
  `French`, `German`, `Greek`, `Hungarian`, `Italian`, `Norwegian`,
  `Portuguese`, `Romanian`, `Russian`, `Spanish`, `Swedish`, `Tamil`, and
  `Turkish`.
</ParamField>

## Remove Long

The `remove_long` filter removes all tokens longer than a fixed number of bytes. If not specified,
`remove_long` defaults to `255`.

```sql
CREATE INDEX search_idx ON mock_items
USING bm25 (id, description)
WITH (
    key_field='id',
    text_fields='{
        "description": {"tokenizer": {"type": "default", "remove_long": 255}}
    }'
);
```

## Lowercase

The `lowercase` filter lowercases all tokens. If not specified, `lowercase` defaults to `true`.

```sql
CREATE INDEX search_idx ON mock_items
USING bm25 (id, description)
WITH (
    key_field='id',
    text_fields='{
        "description": {"tokenizer": {"type": "default", "lowercase": false}}
    }'
);
```

## Stopwords Language

<Note>This filter is not supported for the ngram tokenizer.</Note>

`stopwords_language` removes common "stop words" for a specific language from the original text before tokenization.

```sql
CREATE INDEX search_idx ON mock_items
USING bm25 (id, description)
WITH (
    key_field='id',
    text_fields='{
        "description": {"tokenizer": {"type": "default", "stopwords_language": "English"}}
    }'
);
```

<ParamField body="stopwords_language">
  Available languages are `Danish`, `Dutch`, `English`, `Finnish`, `French`,
  `German`, `Hungarian`, `Italian`, `Norwegian`, `Portuguese`, `Russian`,
  `Spanish`, and `Swedish`.
</ParamField>

## Custom Stopwords

<Note>This filter is not supported for the ngram tokenizer.</Note>

`stopwords` removes custom words from the original text before tokenization.

```sql
CREATE INDEX search_idx ON mock_items
USING bm25 (id, description)
WITH (
    key_field='id',
    text_fields='{
        "description": {"tokenizer": {"type": "default", "stopwords": ["shoes", "boots"]}}
    }'
);
```

## ASCII Folding

The ASCII folding filter strips away diacritical marks (accents, umlauts, tildes, etc.) while leaving the base character intact.

```sql
CREATE INDEX search_idx ON mock_items
USING bm25 (id, description)
WITH (
    key_field='id',
    text_fields='{
        "description": {"tokenizer": {"type": "default", "ascii_folding": true}}
    }'
);
```

## Trim

The `trim` filter removes leading and trailing whitespace from each token. After trimming, tokens that become empty are filtered out.
This filter maps to Elasticsearch's trim token filter.

```sql
CREATE INDEX search_idx ON mock_items
USING bm25 (id, description)
WITH (
    key_field='id',
    text_fields='{
        "description": {"tokenizer": {"type": "jieba", "trim": true}}
    }'
);
```

### When to use trim

The `trim` filter is particularly useful for:

1. **CJK tokenizers (Jieba, Lindera)** - These tokenizers may produce whitespace-only tokens that should be removed
2. **Custom tokenizers** - Any tokenizer that preserves surrounding whitespace in tokens
3. **Elasticsearch compatibility** - Matching Elasticsearch's standard text processing behavior

### Examples

```sql
-- With Jieba (Chinese) - removes space tokens
SELECT '富裕 劳动力'::pdb.jieba('trim=true')::text[];
-- Returns: {富裕,劳动,动力,劳动力} (no space token)
-- Without trim: {富裕," ",劳动,动力,劳动力}

-- With Lindera (Chinese) - removes space tokens
SELECT '富裕 劳动力'::pdb.lindera('chinese', 'trim=true')::text[];
-- Returns: {富裕,劳动力}

-- With simple tokenizer - trims leading/trailing spaces (if present)
SELECT '  hello world  '::pdb.simple('trim=true')::text[];
-- Returns: {hello,world}
```

<Note>
  The `trim` filter detects all Unicode whitespace characters, not just spaces.
  This includes tabs, newlines, and other Unicode whitespace as defined by the
  Unicode standard.
</Note>
