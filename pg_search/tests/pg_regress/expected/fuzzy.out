EXPLAIN (FORMAT TEXT, COSTS OFF, TIMING OFF) SELECT * FROM regress.mock_items WHERE description @@@ 'shoes'::pdb.fuzzy(2);
ERROR:  relation "regress.mock_items" does not exist at character 60
EXPLAIN (FORMAT TEXT, COSTS OFF, TIMING OFF) SELECT * FROM regress.mock_items WHERE description &&& 'shoes'::pdb.fuzzy(2);
ERROR:  relation "regress.mock_items" does not exist at character 60
EXPLAIN (FORMAT TEXT, COSTS OFF, TIMING OFF) SELECT * FROM regress.mock_items WHERE description ||| 'shoes'::pdb.fuzzy(2);
ERROR:  relation "regress.mock_items" does not exist at character 60
EXPLAIN (FORMAT TEXT, COSTS OFF, TIMING OFF) SELECT * FROM regress.mock_items WHERE description === 'shoes'::pdb.fuzzy(2);
ERROR:  relation "regress.mock_items" does not exist at character 60
EXPLAIN (FORMAT TEXT, COSTS OFF, TIMING OFF) SELECT * FROM regress.mock_items WHERE description @@@ pdb.term('shoes')::pdb.fuzzy(2);
ERROR:  relation "regress.mock_items" does not exist at character 60
SELECT * FROM regress.mock_items WHERE description === 'sho'::pdb.fuzzy(0) ORDER BY id; -- no results
ERROR:  relation "regress.mock_items" does not exist at character 15
SELECT * FROM regress.mock_items WHERE description === 'sho'::pdb.fuzzy(1) ORDER BY id; -- no results
ERROR:  relation "regress.mock_items" does not exist at character 15
SELECT * FROM regress.mock_items WHERE description === 'sho'::pdb.fuzzy(2) ORDER BY id; -- 3 rows
ERROR:  relation "regress.mock_items" does not exist at character 15
--
-- array to fuzzy
--
SELECT * FROM regress.mock_items WHERE description === ARRAY['sho', 'running']::pdb.fuzzy(2) ORDER BY id;
ERROR:  relation "regress.mock_items" does not exist at character 15
SELECT * FROM regress.mock_items WHERE description &&& ARRAY['sho', 'running']::pdb.fuzzy(2) ORDER BY id;
ERROR:  relation "regress.mock_items" does not exist at character 15
SELECT * FROM regress.mock_items WHERE description ||| ARRAY['sho', 'running']::pdb.fuzzy(2) ORDER BY id;
ERROR:  relation "regress.mock_items" does not exist at character 15
--
-- (currently) unsupported for phrase and proximity
--
EXPLAIN (FORMAT TEXT, COSTS OFF, TIMING OFF) SELECT * FROM regress.mock_items WHERE description ### 'running shoes'::pdb.fuzzy(2);
ERROR:  relation "regress.mock_items" does not exist at character 60
EXPLAIN (FORMAT TEXT, COSTS OFF, TIMING OFF) SELECT * FROM regress.mock_items WHERE description @@@ ('running' ##3## 'shoes')::pdb.fuzzy(2);
ERROR:  relation "regress.mock_items" does not exist at character 60
SELECT * FROM regress.mock_items WHERE description ### ARRAY['sho', 'running']::pdb.fuzzy(2) ORDER BY id;
ERROR:  relation "regress.mock_items" does not exist at character 15
--
-- validate json representation
--
SELECT 'beer'::pdb.fuzzy(2);
                                                        fuzzy                                                        
---------------------------------------------------------------------------------------------------------------------
 {"unclassified_string":{"string":"beer","fuzzy_data":{"distance":2,"prefix":false,"transposition_cost_one":false}}}
(1 row)

SELECT 'beer'::pdb.fuzzy(2, t, t);
                                                       fuzzy                                                       
-------------------------------------------------------------------------------------------------------------------
 {"unclassified_string":{"string":"beer","fuzzy_data":{"distance":2,"prefix":true,"transposition_cost_one":true}}}
(1 row)

SELECT 'beer'::pdb.fuzzy(2, t, f);
                                                       fuzzy                                                        
--------------------------------------------------------------------------------------------------------------------
 {"unclassified_string":{"string":"beer","fuzzy_data":{"distance":2,"prefix":true,"transposition_cost_one":false}}}
(1 row)

SELECT 'beer'::pdb.fuzzy(2, f, f);
                                                        fuzzy                                                        
---------------------------------------------------------------------------------------------------------------------
 {"unclassified_string":{"string":"beer","fuzzy_data":{"distance":2,"prefix":false,"transposition_cost_one":false}}}
(1 row)

SELECT 'beer'::pdb.fuzzy(2, f, t);
                                                       fuzzy                                                        
--------------------------------------------------------------------------------------------------------------------
 {"unclassified_string":{"string":"beer","fuzzy_data":{"distance":2,"prefix":false,"transposition_cost_one":true}}}
(1 row)

SELECT 'beer'::pdb.fuzzy(2, "true", "true");
                                                       fuzzy                                                       
-------------------------------------------------------------------------------------------------------------------
 {"unclassified_string":{"string":"beer","fuzzy_data":{"distance":2,"prefix":true,"transposition_cost_one":true}}}
(1 row)

SELECT 'beer'::pdb.fuzzy(2, "false", "false");
                                                        fuzzy                                                        
---------------------------------------------------------------------------------------------------------------------
 {"unclassified_string":{"string":"beer","fuzzy_data":{"distance":2,"prefix":false,"transposition_cost_one":false}}}
(1 row)

--
-- error conditions
--
SELECT 'beer'::pdb.fuzzy(-1);
ERROR:  fuzzy value must be 0, 1, or 2 at character 16
SELECT 'beer'::pdb.fuzzy(3);
ERROR:  fuzzy value must be 0, 1, or 2 at character 16
SELECT 'beer'::pdb.fuzzy(hi_mom);
ERROR:  invalid fuzzy value: hi_mom at character 16
SELECT 'beer'::pdb.fuzzy(2, true, true);    -- thanks, Postgres!
ERROR:  type modifiers must be simple constants or identifiers at character 16
