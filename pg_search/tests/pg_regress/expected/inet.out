CREATE EXTENSION IF NOT EXISTS pg_search;
SET paradedb.enable_aggregate_custom_scan TO on;
DROP TABLE IF EXISTS tbl_inet;
CREATE TABLE tbl_inet (ip inet);
CREATE INDEX idx_inet ON tbl_inet USING bm25 (ip) WITH (key_field = 'ip');
INSERT INTO tbl_inet (ip) VALUES ('192.168.0.1');
SELECT count(*) FROM tbl_inet WHERE ip @@@ '192.168.0.1';
 count 
-------
     1
(1 row)

EXPLAIN SELECT count(*) FROM tbl_inet WHERE ip @@@ '192.168.0.1';
                                                                    QUERY PLAN                                                                     
---------------------------------------------------------------------------------------------------------------------------------------------------
 Custom Scan (ParadeDB Aggregate Scan) on tbl_inet  (cost=0.00..0.00 rows=0 width=8)
   Index: idx_inet
   Tantivy Query: {"with_index":{"query":{"parse_with_field":{"field":"ip","query_string":"192.168.0.1","lenient":null,"conjunction_mode":null}}}}
     Applies to Aggregates: COUNT(*)
     Aggregate Definition: {"0":{"value_count":{"field":"ctid","missing":null}}}
(5 rows)

RESET paradedb.enable_aggregate_custom_scan;
