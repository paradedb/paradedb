CREATE EXTENSION IF NOT EXISTS pg_search;
SELECT 'Running Shoes.  olé'::pdb.simple::text[];
        text         
---------------------
 {running,shoes,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('lowercase=false')::text[];
        text         
---------------------
 {Running,Shoes,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('lowercase=false', 'stemmer=english', 'ascii_folding=true')::text[];
      text      
----------------
 {Run,Shoe,ole}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.whitespace::text[];
         text         
----------------------
 {running,shoes.,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.whitespace('lowercase=false')::text[];
         text         
----------------------
 {Running,Shoes.,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.whitespace('lowercase=false', 'stemmer=english', 'ascii_folding=true')::text[];
       text       
------------------
 {Run,Shoes.,ole}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.literal::text[];
          text           
-------------------------
 {"Running Shoes.  olé"}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.literal('alias=foo')::text[];  -- only option supported for exact
          text           
-------------------------
 {"Running Shoes.  olé"}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.literal('lowercase=false', 'stemmer=english', 'ascii_folding=true')::text[];
ERROR:  type modifier is not allowed for type "literal" at character 31
SELECT 'Running Shoes.  olé'::pdb.chinese_compatible::text[];
        text         
---------------------
 {running,shoes,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.chinese_compatible('lowercase=false')::text[];
        text         
---------------------
 {Running,Shoes,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.chinese_compatible('lowercase=false', 'stemmer=english', 'ascii_folding=true')::text[];
      text      
----------------
 {Run,Shoe,ole}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.lindera::text[]; -- error, needs a language
ERROR:  Missing required option: 'language'
SELECT 'Running Shoes.  olé'::pdb.lindera('language=chinese')::text[]; -- error, needs a language
              text              
--------------------------------
 {running," ",shoes,.,"  ",olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.lindera('language=japanese')::text[]; -- error, needs a language
              text              
--------------------------------
 {running," ",shoes,.,"  ",olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.lindera('language=korean')::text[]; -- error, needs a language
              text              
--------------------------------
 {running," ",shoes,.,"  ",olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.lindera(chinese, 'lowercase=false')::text[];
              text              
--------------------------------
 {Running," ",Shoes,.,"  ",olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.lindera(chinese, 'lowercase=false', 'stemmer=english', 'ascii_folding=true')::text[];
           text            
---------------------------
 {Run," ",Shoe,.,"  ",ole}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.lindera(japanese, 'lowercase=false')::text[];
              text              
--------------------------------
 {Running," ",Shoes,.,"  ",olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.lindera(japanese, 'lowercase=false', 'stemmer=english', 'ascii_folding=true')::text[];
           text            
---------------------------
 {Run," ",Shoe,.,"  ",ole}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.lindera(korean, 'lowercase=false')::text[];
              text              
--------------------------------
 {Running," ",Shoes,.,"  ",olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.lindera(korean, 'lowercase=false', 'stemmer=english', 'ascii_folding=true')::text[];
           text            
---------------------------
 {Run," ",Shoe,.,"  ",ole}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.jieba::text[];
                text                
------------------------------------
 {running," ",shoes,.," "," ",ol,é}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.jieba('lowercase=false')::text[];
                text                
------------------------------------
 {Running," ",Shoes,.," "," ",ol,é}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.jieba('lowercase=false', 'stemmer=english', 'ascii_folding=true')::text[];
             text              
-------------------------------
 {Run," ",Shoe,.," "," ",ol,e}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.ngram::text[]; -- error, needs min/max
ERROR:  Missing required option: 'min'
SELECT 'Running Shoes.  olé'::pdb.ngram(2, 3)::text[];
                                                                        text                                                                         
-----------------------------------------------------------------------------------------------------------------------------------------------------
 {ru,run,un,unn,nn,nni,ni,nin,in,ing,ng,"ng ","g ","g s"," s"," sh",sh,sho,ho,hoe,oe,oes,es,es.,s.,"s. ",". ",".  ","  ","  o"," o"," ol",ol,olé,lé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.ngram(2, 3, 'prefix_only=true')::text[];
   text   
----------
 {ru,run}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.ngram('min=2', 'max=3', 'prefix_only=true')::text[];
   text   
----------
 {ru,run}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.ngram(2, 3, 'lowercase=false')::text[];
                                                                        text                                                                         
-----------------------------------------------------------------------------------------------------------------------------------------------------
 {Ru,Run,un,unn,nn,nni,ni,nin,in,ing,ng,"ng ","g ","g S"," S"," Sh",Sh,Sho,ho,hoe,oe,oes,es,es.,s.,"s. ",". ",".  ","  ","  o"," o"," ol",ol,olé,lé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.ngram(2, 3, 'lowercase=false', 'stemmer=english', 'ascii_folding=true')::text[];
                                                                        text                                                                        
----------------------------------------------------------------------------------------------------------------------------------------------------
 {Ru,Run,un,unn,nn,nni,ni,nin,in,ing,ng,"ng ","g ","g S"," S"," Sh",Sh,Sho,ho,hoe,oe,oe,es,es.,s.,"s. ",". ",".  ","  ","  o"," o"," ol",ol,ole,le}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.ngram('min=2', 'max=3', 'lowercase=false', 'stemmer=english', 'ascii_folding=true')::text[];
                                                                        text                                                                        
----------------------------------------------------------------------------------------------------------------------------------------------------
 {Ru,Run,un,unn,nn,nni,ni,nin,in,ing,ng,"ng ","g ","g S"," S"," Sh",Sh,Sho,ho,hoe,oe,oe,es,es.,s.,"s. ",". ",".  ","  ","  o"," o"," ol",ol,ole,le}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=arabic')::text[];
        text         
---------------------
 {running,shoes,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=danish')::text[];
        text         
---------------------
 {running,shoes,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=dutch')::text[];
        text         
---------------------
 {running,shoes,ole}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=english')::text[];
      text      
----------------
 {run,shoe,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=finnish')::text[];
        text         
---------------------
 {running,shoes,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=french')::text[];
       text        
-------------------
 {running,sho,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=german')::text[];
        text         
---------------------
 {running,shoes,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=greek')::text[];
        text         
---------------------
 {running,shoes,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=hungarian')::text[];
        text        
--------------------
 {running,shoes,ol}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=italian')::text[];
        text         
---------------------
 {running,shoes,olè}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=norwegian')::text[];
        text         
---------------------
 {running,shoes,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=portuguese')::text[];
       text        
-------------------
 {running,sho,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=romanian')::text[];
        text         
---------------------
 {running,shoes,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=russian')::text[];
        text         
---------------------
 {running,shoes,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=spanish')::text[];
       text        
-------------------
 {running,sho,ole}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=swedish')::text[];
        text         
---------------------
 {running,shoes,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=tamil')::text[];
        text         
---------------------
 {running,shoes,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=turkish')::text[];
         text         
----------------------
 {runningi,shoes,olé}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=foo')::text[]; -- error
ERROR:  Invalid value for option 'stemmer': must be one of: [Arabic, Danish, Dutch, English, Finnish, French, German, Greek, Hungarian, Italian, Norwegian, Portuguese, Romanian, Russian, Spanish, Swedish, Tamil, Turkish], got 'foo'
SELECT 'Running Shoes.  olé'::pdb.simple('stemmer=english', 'lowercase=false', 'ascii_folding=true')::text[];
      text      
----------------
 {Run,Shoe,ole}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.regex_pattern::text[]; -- error, needs a regular expression
ERROR:  Missing required option: 'pattern'
SELECT 'Running Shoes.  olé'::pdb.regex_pattern('ing|oes')::text[];
   text    
-----------
 {ing,oes}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.regex_pattern('ing|oes', 'lowercase=false', 'stemmer=english', 'ascii_folding=true')::text[];
   text   
----------
 {ing,oe}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.source_code::text[];
        text         
---------------------
 {running,shoes,ole}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.source_code('lowercase=false')::text[];
        text         
---------------------
 {Running,Shoes,ole}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.source_code('lowercase=false', 'stemmer=english', 'ascii_folding=true')::text[];
      text      
----------------
 {Run,Shoe,ole}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.literal_normalized::text[];
          text           
-------------------------
 {"running shoes.  olé"}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.literal_normalized('lowercase=false')::text[];
          text           
-------------------------
 {"Running Shoes.  olé"}
(1 row)

SELECT 'Running Shoes.  olé'::pdb.literal_normalized('lowercase=false', 'stemmer=english', 'ascii_folding=true')::text[];
          text           
-------------------------
 {"Running Shoes.  ole"}
(1 row)

-- Invalid configurations
SELECT 'Running Shoes.  olé'::pdb.simple('stemmmer=english')::text[];
ERROR:  Invalid option: 'stemmmer'. Allowed options: alias, alpha_num_only, ascii_folding, lowercase, normalizer, remove_long, remove_short, stemmer, stopwords, stopwords_language, trim.
SELECT 'Running Shoes.  olé'::pdb.simple('min=english')::text[];
ERROR:  Invalid option: 'min'. Allowed options: alias, alpha_num_only, ascii_folding, lowercase, normalizer, remove_long, remove_short, stemmer, stopwords, stopwords_language, trim.
SELECT 'Running Shoes.  olé'::pdb.simple('ascii_folding=foo')::text[];
ERROR:  Cannot parse value of 'ascii_folding=foo'
SELECT 'Running Shoes.  olé'::pdb.simple('ascii_folding=f')::text[];
ERROR:  Cannot parse value of 'ascii_folding=f'
SELECT 'Running Shoes.  olé'::pdb.simple(ascii_folding)::text[];
ERROR:  Option 'ascii_folding' is not allowed at position 0
SELECT 'Running Shoes.  olé'::pdb.simple('remove_short=0')::text[];
ERROR:  Invalid value for option 'remove_short': must be >= 1, got 0
SELECT 'Running Shoes.  olé'::pdb.simple('remove_long=0')::text[];
ERROR:  Invalid value for option 'remove_long': must be >= 1, got 0
SELECT 'Running Shoes.  olé'::pdb.ngram(2, 'invalid')::text[];
ERROR:  Cannot parse value of 'invalid'
